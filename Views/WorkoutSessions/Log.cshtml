@model FlexWise_Prototype.Models.LogSetModel
@{
    var session = (FlexWise_Prototype.Entities.WorkoutSession)ViewBag.Session;
    var workout = session.Workout!;
}

<h1>Logging Workout: @workout.Title</h1>
<p>Started: @session.StartTime</p>

<h3>Exercises</h3>
<ul>
    @foreach (var e in workout.Exercises.OrderBy(x => x.Order))
    {
        <li>
            @e.Order. @e.ExerciseTemplate!.Name
            (@e.RecommendedSets x @e.RecommendedReps)
        </li>
    }
</ul>

<h3>Logged Sets</h3>
<table class="table">
    <thead>
    <tr>
        <th>Exercise</th>
        <th>Set #</th>
        <th>Reps</th>
        <th>Weight</th>
        <th>Notes</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var s in session.Sets.OrderBy(x => x.SetNumber))
    {
        <tr>
            <td>@s.ExerciseTemplate?.Name</td>
            <td>@s.SetNumber</td>
            <td>@s.Reps</td>
            <td>@s.Weight</td>
            <td>@s.Notes</td>
        </tr>
    }
    </tbody>
</table>

<h3>Add Set</h3>
<form method="post" asp-action="AddSet">
    <input type="hidden" asp-for="WorkoutSessionId" />

    <div class="form-group">
        <label>Exercise</label>
        <select asp-for="ExerciseTemplateId" class="form-control">
            @foreach (var e in workout.Exercises.OrderBy(x => x.Order))
            {
                <option value="@e.ExerciseTemplateId">@e.ExerciseTemplate!.Name</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label asp-for="SetNumber"></label>
        <input asp-for="SetNumber" class="form-control" />
    </div>

    <div class="form-group">
        <label asp-for="Reps"></label>
        <input asp-for="Reps" class="form-control" />
    </div>

    <div class="form-group">
        <label asp-for="Weight"></label>
        <input asp-for="Weight" class="form-control" />
    </div>

    <div class="form-group">
        <label asp-for="Notes"></label>
        <textarea asp-for="Notes" class="form-control"></textarea>
    </div>

    <button class="btn btn-success mt-3" type="submit">Add Set</button>
</form>

<form method="post" asp-action="Finish" asp-route-id="@session.Id" class="mt-3">
    <button class="btn btn-danger" type="submit">Finish Workout</button>
</form>